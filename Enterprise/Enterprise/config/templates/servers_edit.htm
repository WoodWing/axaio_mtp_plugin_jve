<script language="JavaScript">

function doUpdate()
{
	var f = document.forms.svrform;
	f.action.value = "update";
	f.submit();
	// return false to prevent a second submit (on IE)
	return false;
}

function doDelete()
{
	if( confirm('<!--RES:SVR_CONFIRM_DELETE-->') ) {
		var f = document.forms.svrform;
		f.action.value = "delete";
		f.submit();
		return true;
	}
	return false;
}

function onChangeServerType()
{
	var f = document.forms.svrform;
	f.action.value = "changetype";
	f.submit();
}

/**
 * Hides the server jobs multi select widget when user picks 'All' or 'None' from the 
 * job type support combo. Or, shows it again when user the 'Selected' option is picked.
 */
function showHideWidgets()
{
	if( $("#wid_jobsupport")[0].value != 'S' ) {
		$("#wid_serverjobs").hide();
	} else {
		$("#wid_serverjobs").show();
	}
}

$(document).ready( function() {

	// When the document is drawn, hide/show widgets
	showHideWidgets();
	
	// When user changes the job type support combo, hide/show widgets
	$("#wid_jobsupport").change( function(e) {
		showHideWidgets();
	});
});

</script>

<table class="appframe"><tr class="text"><td>

	<!-- app header -->
	<table class="apptitlebar">
		<tr>
			<td><img class="apptitleicon" src="../../config/images/server_32.gif"/></td>
			<td>&nbsp;<span class="apptitletext"><!--RES:SVR_MAINTENANCE--></span></td>
		</tr>
	</table>

	<!-- app body -->
	<form name="svrform" action="servers.php" method="post">
		<table class="formframe"><tr><td>
			<table class="formbody">

				<tr><td colspan="2"><font color="#ff0000"><i><!--PAR:ERROR--></i></font></td></tr>
			
				<!--SEC:SERVER_RECORD>-->
				<tr><td><!--RES:OBJ_NAME--></td><td>
					<input type="hidden" name="id" value="<!--PAR:Server->Id-->"/>
					<input size ="30" maxlength="64" name="name" value="<!--PAR:Server->Name-->"/>
				</td></tr>
				<tr><td><!--RES:OBJ_TYPE2--></td><td>
					<select name="type" style="width:100%;" onchange="onChangeServerType();">
						<!--SEC:SERVERTYPE_ENTRY>-->
						<option value="<!--VAR:SERVERTYPE_ID-->" <!--VAR:SERVERTYPE_SELECTED-->><!--VAR:SERVERTYPE_DISPLAY--></option>
						<!--SEC:<SERVERTYPE_ENTRY-->
					</select>
				</td></tr>
				<tr><td><!--RES:OBJ_URL--></td><td>
					<input size ="30" maxlength="1024" name="url" value="<!--PAR:Server->URL-->"/>
				</td></tr>
				<tr><td><!--RES:OBJ_DESCRIPTION--></td><td>
					<textarea cols="26" rows="5" maxlength="255" name="description" value=""><!--PAR:Server->Description--></textarea>
				</td></tr>
				<!--SEC:<SERVER_RECORD-->

				<tr><td><!--RES:SVR_HANDLE_JOBS--></td><td>
					<select id="wid_jobsupport" name="jobsupport" style="width:100%;">
						<!--SEC:JOBSUPPORT_ENTRY>-->
						<option value="<!--VAR:JOBSUPPORT_ID-->" <!--VAR:JOBSUPPORT_SELECTED-->><!--VAR:JOBSUPPORT_DISPLAY--></option>
						<!--SEC:<JOBSUPPORT_ENTRY-->
					</select>
				</td></tr>

				<tr id="wid_serverjobs"><td><!--RES:SVR_SERVER_JOBS--></td><td>
					<select name="jobtypes[]" multiple="multiple" size="15" style="width:100%;">
						<!--SEC:JOBTYPE_ENTRY>-->
						<option value="<!--VAR:JOBTYPE_ID-->" <!--VAR:JOBTYPE_SELECTED-->><!--VAR:JOBTYPE_DISPLAY--></option>
						<!--SEC:<JOBTYPE_ENTRY-->
					</select>
				</td></tr>
			</table>
		</td></tr><tr><td>
			<table class="formbtnbar">
				<tr>
					<td>
						<input type="submit" name="update" value="<!--RES:BUT_UPDATE-->" onClick="return doUpdate();"/>
						<input type="submit" <!--DISABLE_DEL_BTN--> name="delete" value="<!--RES:BUT_DELETE-->" onClick="return doDelete();" />
						<input type="hidden" name="action" value=""/>
					</td>
				</tr>
			</table>
		</td></tr></table>		
	</form>
	<br/>

	<a href="servers.php">
		<img src="../../config/images/back_32.gif" border="0" title="<!--RES:ACT_BACK-->" width="32" height="32"/>
	</a>

</td></tr></table>
